"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[984],{4695:function(e,n,r){var t=r(1413),s=r(9439),i=r(2701),o=r(4585),c=r(5341),a=r(6069),l=r(5705),u=r(184);n.Z=function(e){var n=e.label,r=e.type,d=e.name,x=e.placeholder,h=(0,l.U$)({type:r,name:d,placeholder:x}),p=(0,s.Z)(h,2),f=p[0],j=p[1];return(0,u.jsxs)(i.NI,{isInvalid:j.error&&j.touched,mb:"6",children:[(0,u.jsx)(o.l,{noOfLines:1,children:n}),(0,u.jsx)(l.gN,(0,t.Z)((0,t.Z)({as:a.I},f),{},{type:r,name:d,placeholder:x})),(0,u.jsx)(c.J1,{children:j.error})]})}},8984:function(e,n,r){r.r(n),r.d(n,{default:function(){return oe}});var t=r(4087),s=r(751),i=r(5946),o=r(176),c=r(4165),a=r(5861),l=r(9439),u=r(8348),d=r(1252),x=r(9229),h=r(5515),p=r(7281),f=r(3466),j=r(2791),m=r(9434),g=r(1087),y=r(1413),v=r(1243),b=r(4482),Z=function(e){return function(){var n=(0,a.Z)((0,c.Z)().mark((function n(r,t){var s,i,o,a,l;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=t(),i=s.order.shippingAddress,o=s.user.userInfo,a=(0,y.Z)((0,y.Z)({},e),{},{shippingAddress:i}),n.prev=2,l={headers:{Authorization:"Bearer ".concat(o.token),"Content-Type":"application/json"}},n.next=6,v.Z.post("/api/orders",a,l);case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),r((0,b.sT)(n.t0.response&&n.t0.response.data.message?n.t0.response.data.messsage:n.t0.message?n.t0.message:"An unexpected error has occured. Pleasy try again later."));case 11:case"end":return n.stop()}}),n,null,[[2,8]])})));return function(e,r){return n.apply(this,arguments)}}()},C=r(3433),k=r(3790),S=r(4464),w=r(8886),O=r(1449),z=r(184),I=function(e){var n=e.cartItem,r=n.name,s=n.image,i=n.price,c=n.stock,a=n.qty,l=n.id,u=(0,m.I0)();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(o.k,{children:[(0,z.jsx)(k.E,{rounded:"lg",width:"120px",height:"120px",fit:"cover",src:s,alt:r,loading:"lazy"}),(0,z.jsxs)(o.k,{direction:"column",align:"stretch",flex:"1",mx:"2",spacing:"4",children:[(0,z.jsx)(x.x,{noOfLines:"2",maxW:"150px",children:r}),(0,z.jsx)(S.L,{}),(0,z.jsx)(w.P,{maxW:"64px",focusBorderColor:(0,d.ff)("orange.500","orage.200"),value:a,onChange:function(e){u((0,O._7)(l,e.target.value))},children:(0,C.Z)(Array(c).keys()).map((function(e){return(0,z.jsx)("option",{value:e+1,children:e+1},e)}))})]}),(0,z.jsx)(t.xu,{children:(0,z.jsxs)(x.x,{fontWeight:"bold",children:[i," \u20ac"]})})]}),(0,z.jsx)(p.i,{bg:(0,d.ff)("gray.400","gray.800")})]})},W=r(9126),P=r(6856),q=r(1299),A=r(6550),E=function(e){var n=e.total,r=e.onPaymentSuccess,t=e.onPaymentError,s=e.disabled,i=(0,j.useState)(null),o=(0,l.Z)(i,2),u=o[0],d=o[1];return(0,j.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,c.Z)().mark((function e(){var n,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.Z.get("/api/config/paypal");case 2:n=e.sent,r=n.data,d(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[u]),u?(0,z.jsx)(q.Vv,{options:{"client-id":u},children:(0,z.jsx)(q.ch,{disabled:s,forceReRender:[n(),u],createOrder:function(e,r){return r.order.create({purchase_units:[{amount:{value:n()}}]})},onApprove:function(e,n){return n.order.capture().then((function(n){r(e)}))},onError:function(e){t(e)}})}):(0,z.jsx)(A.Z,{})},T=r(1820),K=r(3380),_=r(3879),L=r(7521),F=r(2128),N=r(7498),D=r(8618),X=r(9753),Y=r(5911),J=function(e){var n=e.isOpen,r=e.onClose,t=e.onOpen;return(0,z.jsx)(z.Fragment,{children:(0,z.jsx)(T.u_,{isOpen:n,onClose:r,onOpen:t,children:(0,z.jsx)(K.Z,{children:(0,z.jsx)(_.h,{children:(0,z.jsx)(L.f,{children:(0,z.jsx)(F.E,{justify:"center",direction:"column",align:"center",mt:"20px",children:(0,z.jsxs)(N.b,{h:"200px",status:"error",variant:"subtle",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",children:[(0,z.jsx)(D.z,{boxSize:"55px"}),(0,z.jsx)(X.C,{pt:"8px",fontSize:"xl",children:"Payment Failed!"}),(0,z.jsx)(Y.X,{children:"We couldn't process your payment."})]})})})})})})})},U=r(1295),B=r(2435),R=r(7689),V=r(3437),H=function(e){var n=e.isOpen,r=e.onClose,t=e.onOpen,i=(0,R.s0)(),o=(0,m.I0)(),c=(0,U.p)();return(0,z.jsx)(z.Fragment,{children:(0,z.jsx)(T.u_,{size:"full",isOpen:n,onClose:r,onOpen:t,children:(0,z.jsx)(K.Z,{children:(0,z.jsx)(_.h,{children:(0,z.jsx)(L.f,{children:(0,z.jsx)(F.E,{justify:"center",direction:"column",align:"center",mt:"20px",children:(0,z.jsxs)(N.b,{status:"success",variant:"subtle",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",height:"auto",children:[(0,z.jsx)(D.z,{boxSize:"55px"}),(0,z.jsx)(X.C,{pt:"8px",fontSize:"xl",children:"Payment Successful"}),(0,z.jsxs)(s.K,{mt:"20px",minW:"200px",children:[(0,z.jsx)(B.z,{colorScheme:"teal",variant:"outline",as:g.rU,to:"/your-orders",children:"Your Orders"}),(0,z.jsx)(B.z,{colorScheme:"teal",variant:"outline",as:g.rU,to:"/products",children:"Products"}),(0,z.jsx)(B.z,{colorScheme:"teal",variant:"outline",onClick:function(){o((0,V.kS)()),c({description:"You have been loggd out. ",status:"sucess",isClosable:!0}),i("/products")},children:"Logout"})]})]})})})})})})})},M=function(){var e=(0,u.q)(),n=e.onClose,r=e.onOpen,y=e.isOpen,v=(0,u.q)(),C=v.onClose,k=v.onOpen,S=v.isOpen,w=(0,d.ff)("gray.600","gray.400"),q=(0,m.v9)((function(e){return e.cart})),A=q.cart,T=q.subtotal,K=q.expressShipping,_=(0,m.v9)((function(e){return e.user})).userInfo,L=(0,m.v9)((function(e){return e.order})),F=L.error,N=L.shippingAddress,D=(0,j.useState)(!1),X=(0,l.Z)(D,2),Y=X[0],U=X[1],B=(0,m.I0)(),R=(0,j.useCallback)((function(){return"true"===K?14.99:T<=1e3?4.99:0}),[K,T]),V=(0,j.useCallback)((function(){return Number(0===R()?Number(T):Number(T)+R()).toFixed(2)}),[R,T]);(0,j.useEffect)((function(){U(!!F)}),[F,N,V,K,R,B]);var M=function(){var e=(0,a.Z)((0,c.Z)().mark((function e(n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(),B(Z({orderItems:A,shippingAddress:N,paymentMethod:n.paymentSource,paymentDetails:n,shippingPrice:R(),totalPrice:V(),userInfo:_})),B(function(){var e=(0,a.Z)((0,c.Z)().mark((function e(n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n((0,b.bn)());case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),B((0,O.s9)());case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,z.jsxs)(s.K,{spacing:"8",rounded:"xl",padding:"8",width:"full",children:[(0,z.jsx)(i.X,{size:"md",children:"Order Summary"}),A.map((function(e){return(0,z.jsx)(I,{cartItem:e},e.id)})),(0,z.jsxs)(s.K,{spacing:"6",children:[(0,z.jsxs)(o.k,{justify:"space-between",children:[(0,z.jsx)(x.x,{fontWeight:"medium",color:w,children:"Subtotal"}),(0,z.jsxs)(x.x,{fontWeight:"medium",color:w,children:[T," \u20ac"]})]}),(0,z.jsxs)(o.k,{justify:"space-between",children:[(0,z.jsx)(x.x,{fontWeight:"medium",color:w,children:"Shipping"}),(0,z.jsx)(x.x,{fontWeight:"medium",color:w,children:0===R()?(0,z.jsx)(h.C,{rounded:"full",px:"2",fontSize:"0.8em",colorScheme:"green",children:"Free"}):(0,z.jsxs)("span",{children:[R()," \u20ac"]})})]}),(0,z.jsxs)(o.k,{justify:"space-between",children:[(0,z.jsx)(x.x,{fontSize:"lg",fontWeight:"semibold",children:"Total"}),(0,z.jsxs)(x.x,{fontSize:"xl",fontWeight:"extrabold",children:[Number(V())," \u20ac"]})]})]}),(0,z.jsx)(E,{total:V,onPaymentSuccess:M,onPaymentError:function(){r()},disabled:Y}),(0,z.jsxs)(t.xu,{align:"center",children:[(0,z.jsx)(x.x,{fontSize:"sm",children:"Have questions? or need to complete your order?"}),(0,z.jsxs)(o.k,{justifyContent:"center",color:(0,d.ff)("orange.500","orange.100"),children:[(0,z.jsxs)(o.k,{align:"center",children:[(0,z.jsx)(W.ElL,{}),(0,z.jsx)(x.x,{m:"2",children:"Live Chat"})]}),(0,z.jsxs)(o.k,{align:"center",children:[(0,z.jsx)(W.lfG,{}),(0,z.jsx)(x.x,{m:"2",children:"Phone"})]}),(0,z.jsxs)(o.k,{align:"center",children:[(0,z.jsx)(P.ixJ,{}),(0,z.jsx)(x.x,{m:"2",children:"Email"})]})]})]}),(0,z.jsx)(p.i,{bg:(0,d.ff)("gray.400","gray.800")}),(0,z.jsxs)(o.k,{justifyContent:"center",my:"6",fontWeight:"semibold",children:[(0,z.jsx)("p",{children:"or "}),(0,z.jsx)(f.r,{ml:"5px",as:g.rU,to:"/products",children:"Continue Shopping"})]}),(0,z.jsx)(J,{isOpen:y,onOpen:r,onClose:n}),(0,z.jsx)(H,{isOpen:S,onOpen:k,onClose:C})]})},G=r(6146),$=r(2701),Q=r(9498),ee=r(2767),ne=r(7377),re=r(5705),te=r(8007),se=r(4695),ie=function(){var e=(0,m.I0)(),n=(0,j.useState)(!1),r=(0,l.Z)(n,2),c=r[0],a=r[1],u=function(n,r){var t;(n||e(function(e){return function(n){n((0,b.SJ)(e))}}(r)),!c&&!n||c&&n)||(a(n),e((t=n,function(e){e((0,b.sT)(t))})))};return(0,z.jsx)(re.J9,{initialValues:{address:"",postalCode:"",city:"",country:""},validationSchema:te.Ry({address:te.Z_().required("This field is required.").min(2,"This address is too short. "),postalCode:te.Z_().required("This field is required.").min(2,"This postal code is too short. "),city:te.Z_().required("This field is required.").min(2,"This city is too short. "),country:te.Z_().required("This field is required.").min(2,"This country is too short. ")}),children:function(n){return(0,z.jsxs)(G.g,{as:"form",children:[(0,z.jsxs)($.NI,{onChange:0===Object.keys(n.errors).length&&Object.keys(n.touched).length>=2?u(!1,n.values):u(!0),children:[(0,z.jsx)(se.Z,{name:"address",placeholder:"Street Address",label:"Street Address"}),(0,z.jsxs)(o.k,{children:[(0,z.jsx)(t.xu,{flex:"1",mr:"10",children:(0,z.jsx)(se.Z,{name:"postalCode",placeholder:"Postal Code",label:"Postal Code",type:"number"})}),(0,z.jsx)(t.xu,{flex:"1",mr:"10",children:(0,z.jsx)(se.Z,{name:"city",placeholder:"City",label:"City"})})]}),(0,z.jsx)(se.Z,{name:"country",placeholder:"Country",label:"Country"})]}),(0,z.jsxs)(t.xu,{w:"100%",h:"180px",pr:"5",children:[(0,z.jsx)(i.X,{fontSize:"2xl",fontWeight:"extrabold",mb:"10",children:"Shipping Method"}),(0,z.jsx)(Q.E,{defaultValue:"false",onChange:function(n){return e((0,O.fh)(n))},children:(0,z.jsxs)(s.K,{direction:{base:"column",lg:"row"},align:{lg:"flex-start"},children:[(0,z.jsxs)(s.K,{pr:"10",spacing:{base:"8",md:"10"},flex:"1.5",children:[(0,z.jsx)(t.xu,{children:(0,z.jsxs)(ee.Y,{value:"true",children:[(0,z.jsx)(x.x,{fontWeight:"bold",children:"Express 14.99 \u20ac"}),(0,z.jsx)(x.x,{children:"Dispatched in 24 hours."})]})}),(0,z.jsx)(s.K,{spacing:"6",children:"Express"})]}),(0,z.jsx)(ee.Y,{value:"false",children:(0,z.jsx)(ne.u,{label:"Free shipping for orders of 1000 \u20ac or more!",children:(0,z.jsxs)(t.xu,{children:[(0,z.jsx)(x.x,{fontWeight:"bold",children:"Standard 4.00 \u20ac"}),(0,z.jsx)(x.x,{children:"Dispatched in 2 - 3 days"})]})})})]})})]})]})}})},oe=function(){return(0,z.jsx)(t.xu,{minH:"100vh",maxW:{base:"3xl",lg:"7xl"},mx:"auto",px:{base:"4",md:"8",lg:"12"},py:{base:"6",md:"8",lg:"12"},children:(0,z.jsxs)(s.K,{direction:{base:"column",lg:"row"},align:{lg:"flex-start"},children:[(0,z.jsxs)(s.K,{spacing:{base:"8",md:"10"},flex:"1.5",mb:{base:"12",md:"none"},children:[(0,z.jsx)(i.X,{fontSize:"2xl",fontWeight:"extrabold",children:"Shipping Information"}),(0,z.jsx)(s.K,{spacing:"6",children:(0,z.jsx)(ie,{})})]}),(0,z.jsx)(o.k,{direction:"column",align:"center",flex:"1",children:(0,z.jsx)(M,{})})]})})}},1449:function(e,n,r){r.d(n,{B8:function(){return a},_7:function(){return c},fh:function(){return l},s9:function(){return u}});var t=r(4165),s=r(5861),i=r(1243),o=r(2038),c=function(e,n){return function(){var r=(0,s.Z)((0,t.Z)().mark((function r(s){var c,a,l;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s((0,o.K4)(!0)),r.prev=1,r.next=4,i.Z.get("/api/products/".concat(e));case 4:c=r.sent,a=c.data,l={id:a._id,name:a.name,image:a.image,price:a.price,stock:a.stock,qty:n},s((0,o.zs)(l)),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(1),s((0,o.sT)(r.t0.response&&r.t0.response.data.message?r.t0.response.data.messsage:r.t0.message?r.t0.message:"An unexpected error has occured. Pleasy try again later."));case 13:case"end":return r.stop()}}),r,null,[[1,10]])})));return function(e){return r.apply(this,arguments)}}()},a=function(e){return function(){var n=(0,s.Z)((0,t.Z)().mark((function n(r){return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r((0,o.K4)(!0)),r((0,o.gX)(e));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},l=function(e){return function(){var n=(0,s.Z)((0,t.Z)().mark((function n(r){return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r((0,o.Yo)(e));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},u=function(){return function(e){e((0,o.LL)())}}}}]);
//# sourceMappingURL=984.c958c41a.chunk.js.map